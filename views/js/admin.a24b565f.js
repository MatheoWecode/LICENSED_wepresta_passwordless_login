/*!
 * Module for PrestaShop
 *
 *                 xxxx
 *                 xxxx
 *
 *                 @author      WePresta
 *                 @copyright   2026 WePresta
 *                 @license     MIT
 */
"use strict";(self.webpackChunkwepresta_passwordless_login=self.webpackChunkwepresta_passwordless_login||[]).push([[884],{8335:function(t,e,r){r(4114),r(8992),r(2577),r(3949),r(1454);!function(t){const e={init:function(){this.bindEvents(),this.initSortable(),this.initTooltips(),console.debug("[Wepresta_Passwordless_LoginAdmin] Initialized")},bindEvents:function(){t(document).on("change",".wepresta_passwordless_login-toggle",this.handleToggle.bind(this)),t(document).on("click",".js-wepresta_passwordless_login-bulk-action",this.handleBulkAction.bind(this)),t(document).on("click",".js-wepresta_passwordless_login-delete",this.handleDelete.bind(this)),t(document).on("submit",".wepresta_passwordless_login-form",this.handleFormSubmit.bind(this)),t(document).on("change",".wepresta_passwordless_login-image-input",this.handleImagePreview.bind(this)),t(document).on("submit",".wepresta_passwordless_login-ajax-form",this.handleAjaxForm.bind(this))},initSortable:function(){const e=t(".wepresta_passwordless_login-sortable");e.length&&t.fn.sortable&&e.sortable({handle:".sortable-handle",placeholder:"sortable-placeholder",update:this.handleSortUpdate.bind(this)})},initTooltips:function(){t('[data-toggle="tooltip"], [data-bs-toggle="tooltip"]').tooltip()},handleToggle:function(e){const r=t(e.currentTarget),o=r.data("id"),n=r.is(":checked");this.showLoader(r.closest("tr")),t.ajax({url:r.data("url")||window.moduleStarterAdminUrl,method:"POST",data:{action:"toggle",id:o,active:n?1:0,ajax:1},success:t=>{t.success?this.showSuccess(t.message||"Status updated"):(r.prop("checked",!n),this.showError(t.message||"Error updating status"))},error:()=>{r.prop("checked",!n),this.showError("Network error")},complete:()=>{this.hideLoader(r.closest("tr"))}})},handleBulkAction:function(e){e.preventDefault();const r=t(e.currentTarget).data("action"),o=t("input.bulk-checkbox:checked");if(0===o.length)return void this.showWarning("Please select at least one item");const n=o.map(function(){return t(this).val()}).get();("delete"!==r||confirm("Are you sure you want to delete "+n.length+" item(s)?"))&&(this.showLoader(),t.ajax({url:window.moduleStarterAdminUrl,method:"POST",data:{action:"bulk_"+r,ids:n,ajax:1},success:t=>{t.success?(this.showSuccess(t.message),location.reload()):this.showError(t.message)},error:()=>{this.showError("Bulk action failed")},complete:()=>{this.hideLoader()}}))},handleDelete:function(e){e.preventDefault();const r=t(e.currentTarget);if(!confirm(r.data("confirm")||"Are you sure you want to delete this item?"))return;const o=r.closest("tr");this.showLoader(o),t.ajax({url:r.attr("href")||r.data("url"),method:"POST",data:{action:"delete",id:r.data("id"),ajax:1},success:e=>{e.success?(o.fadeOut(300,function(){t(this).remove()}),this.showSuccess(e.message||"Item deleted")):this.showError(e.message||"Delete failed")},error:()=>{this.showError("Delete failed")},complete:()=>{this.hideLoader(o)}})},handleSortUpdate:function(e,r){const o=t(e.target).find(".sortable-item"),n=[];o.each(function(e){n.push({id:t(this).data("id"),position:e})}),t.ajax({url:window.moduleStarterAdminUrl,method:"POST",data:{action:"updatePositions",positions:n,ajax:1},success:t=>{t.success||this.showError("Position update failed")},error:()=>{this.showError("Position update failed")}})},handleFormSubmit:function(e){const r=t(e.currentTarget);let o=!0;r.find("[required]").each(function(){t(this).val()?t(this).removeClass("is-invalid"):(t(this).addClass("is-invalid"),o=!1)}),o||(e.preventDefault(),this.showError("Please fill in all required fields"))},handleAjaxForm:function(e){e.preventDefault();const r=t(e.currentTarget),o=r.find('[type="submit"]');o.prop("disabled",!0).addClass("loading"),t.ajax({url:r.attr("action"),method:r.attr("method")||"POST",data:r.serialize(),success:t=>{t.success?(this.showSuccess(t.message),t.redirect&&(window.location.href=t.redirect)):(this.showError(t.message||"Form submission failed"),t.errors&&this.displayFormErrors(r,t.errors))},error:()=>{this.showError("Form submission failed")},complete:()=>{o.prop("disabled",!1).removeClass("loading")}})},handleImagePreview:function(e){const r=t(e.currentTarget).siblings(".image-preview");if(e.target.files&&e.target.files[0]){const t=new FileReader;t.onload=function(t){r.attr("src",t.target.result).show()},t.readAsDataURL(e.target.files[0])}},displayFormErrors:function(t,e){t.find(".is-invalid").removeClass("is-invalid"),t.find(".invalid-feedback").remove(),Object.keys(e).forEach(r=>{const o=t.find('[name="'+r+'"]');o.addClass("is-invalid"),o.after('<div class="invalid-feedback">'+e[r]+"</div>")})},showLoader:function(e){e?e.addClass("loading"):t("body").addClass("loading-overlay")},hideLoader:function(e){e?e.removeClass("loading"):t("body").removeClass("loading-overlay")},showSuccess:function(t){"function"==typeof showSuccessMessage?showSuccessMessage(t):alert(t)},showError:function(t){"function"==typeof showErrorMessage?showErrorMessage(t):alert("Error: "+t)},showWarning:function(t){alert(t)}};t(document).ready(function(){e.init()}),window.Wepresta_Passwordless_LoginAdmin=e}(window.jQuery||window.$)},4527:function(t,e,r){var o=r(3724),n=r(4376),i=TypeError,s=Object.getOwnPropertyDescriptor,a=o&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(n(t)&&!s(t,"length").writable)throw new i("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},6319:function(t,e,r){var o=r(8551),n=r(9539);t.exports=function(t,e,r,i){try{return i?e(o(r)[0],r[1]):e(r)}catch(e){n(t,"throw",e)}}},2529:function(t){t.exports=function(t,e){return{value:t,done:e}}},6279:function(t,e,r){var o=r(6840);t.exports=function(t,e,r){for(var n in e)o(t,n,e[n],r);return t}},6837:function(t){var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},4376:function(t,e,r){var o=r(2195);t.exports=Array.isArray||function(t){return"Array"===o(t)}},1385:function(t,e,r){var o=r(9539);t.exports=function(t,e,r){for(var n=t.length-1;n>=0;n--)if(void 0!==t[n])try{r=o(t[n].iterator,e,r)}catch(t){e="throw",r=t}if("throw"===e)throw r;return r}},9462:function(t,e,r){var o=r(9565),n=r(2360),i=r(6699),s=r(6279),a=r(8227),c=r(1181),d=r(5966),l=r(7657).IteratorPrototype,u=r(2529),h=r(9539),f=r(1385),p=a("toStringTag"),w="IteratorHelper",g="WrapForValidIterator",m="normal",v="throw",b=c.set,y=function(t){var e=c.getterFor(t?g:w);return s(n(l),{next:function(){var r=e(this);if(t)return r.nextHandler();if(r.done)return u(void 0,!0);try{var o=r.nextHandler();return r.returnHandlerResult?o:u(o,r.done)}catch(t){throw r.done=!0,t}},return:function(){var r=e(this),n=r.iterator;if(r.done=!0,t){var i=d(n,"return");return i?o(i,n):u(void 0,!0)}if(r.inner)try{h(r.inner.iterator,m)}catch(t){return h(n,v,t)}if(r.openIters)try{f(r.openIters,m)}catch(t){return h(n,v,t)}return n&&h(n,m),u(void 0,!0)}})},x=y(!0),E=y(!1);i(E,p,"Iterator Helper"),t.exports=function(t,e,r){var o=function(o,n){n?(n.iterator=o.iterator,n.next=o.next):n=o,n.type=e?g:w,n.returnHandlerResult=!!r,n.nextHandler=t,n.counter=0,n.done=!1,b(this,n)};return o.prototype=e?x:E,o}},684:function(t){t.exports=function(t,e){var r="function"==typeof Iterator&&Iterator.prototype[t];if(r)try{r.call({next:null},e).next()}catch(t){return!0}}},4114:function(t,e,r){var o=r(6518),n=r(8981),i=r(6198),s=r(4527),a=r(6837);o({target:"Array",proto:!0,arity:1,forced:r(9039)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=n(this),r=i(e),o=arguments.length;a(r+o);for(var c=0;c<o;c++)e[r]=arguments[c],r++;return s(e,r),r}})},7588:function(t,e,r){var o=r(6518),n=r(9565),i=r(2652),s=r(9306),a=r(8551),c=r(1767),d=r(9539),l=r(4549)("forEach",TypeError);o({target:"Iterator",proto:!0,real:!0,forced:l},{forEach:function(t){a(this);try{s(t)}catch(t){d(this,"throw",t)}if(l)return n(l,this,t);var e=c(this),r=0;i(e,function(e){t(e,r++)},{IS_RECORD:!0})}})},1701:function(t,e,r){var o=r(6518),n=r(9565),i=r(9306),s=r(8551),a=r(1767),c=r(9462),d=r(6319),l=r(9539),u=r(684),h=r(4549),f=r(6395),p=!f&&!u("map",function(){}),w=!f&&!p&&h("map",TypeError),g=f||p||w,m=c(function(){var t=this.iterator,e=s(n(this.next,t));if(!(this.done=!!e.done))return d(t,this.mapper,[e.value,this.counter++],!0)});o({target:"Iterator",proto:!0,real:!0,forced:g},{map:function(t){s(this);try{i(t)}catch(t){l(this,"throw",t)}return w?n(w,this,t):new m(a(this),{mapper:t})}})},3949:function(t,e,r){r(7588)},1454:function(t,e,r){r(1701)}},function(t){t.O(0,[448],function(){return e=8335,t(t.s=e);var e});t.O()}]);