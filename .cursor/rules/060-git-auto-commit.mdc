---
description: Commits automatiques pour modifications importantes du module
globs: ["**/*"]
alwaysApply: false
---

# ü§ñ Commits Automatiques

## R√®gle G√©n√©rale

**COMMITTEZ AUTOMATIQUEMENT** apr√®s chaque modification importante :

### ‚úÖ Toujours committer apr√®s :

#### üìÑ Fichiers PHP principaux
```php
// Apr√®s modification de :
modulestarter.php           // Hook principal
composer.json               // D√©pendances
config/services.yml         // Services Symfony
config/routes.yml           // Routes Symfony
```

#### üèóÔ∏è Architecture & Structure
```php
// Nouvelles entit√©s, services, contr√¥leurs
src/Domain/Entity/
src/Application/Service/
src/Presentation/Controller/
```

#### üé® Frontend
```scss
// Apr√®s compilation
_dev/scss/           // Sources SCSS
views/css/           // CSS compil√©
```

#### üóÑÔ∏è Base de donn√©es
```sql
// Scripts SQL
sql/install.sql
sql/uninstall.sql
```

#### üß™ Tests
```php
// Nouveaux tests
tests/
```

### ‚ùå Ne PAS committer :

- Fichiers temporaires (`*.tmp`, `*.log`)
- Cache (`var/cache/*`, `var/logs/*`)
- Assets non compil√©s pendant le d√©veloppement
- Fichiers de configuration locaux (`.env.local`)

## Messages de Commit Standards

### Format recommand√© :
```
<type>: <description>

[body optionnel]

<footer optionnel>
```

### Types de commits :
- `feat:` Nouvelle fonctionnalit√©
- `fix:` Correction de bug
- `docs:` Documentation
- `style:` Formatage, points-virgules, etc.
- `refactor:` Refactorisation du code
- `test:` Tests
- `chore:` Maintenance

### Exemples :
```
feat: ajouter syst√®me de cache Redis

fix: corriger validation email dans formulaire contact

refactor: migrer vers Clean Architecture

docs: mettre √† jour README installation

test: ajouter tests pour ProductService
```

## D√©clencheurs Automatiques

### Apr√®s compilation assets :
```bash
npm run build  # ‚Üí commit "build: compiler assets frontend"
```

### Apr√®s ajout de hook :
```php
public function hookDisplayHome() { /*...*/ }  // ‚Üí commit "feat: ajouter hook displayHome"
```

### Apr√®s cr√©ation d'entit√© :
```php
class ProductEntity { /*...*/ }  // ‚Üí commit "feat: cr√©er entit√© Product"
```

### Apr√®s ajout de service :
```yaml
# config/services.yml
App\Service\ProductService:  # ‚Üí commit "feat: ajouter service ProductService"
```

## Configuration Git

### .gitignore recommand√© :
```
# Dependencies
/vendor/
/node_modules/

# Cache
/var/cache/
/var/logs/

# Assets sources (commit seulement les compil√©s)
/_dev/
/*.map

# Local config
.env.local
config.local.yml
```

### Hooks Git (optionnel) :

Cr√©er `.git/hooks/pre-commit` :
```bash
#!/bin/bash
# V√©rifier PHPStan avant commit
composer phpstan
```

## Workflow Recommand√©

1. **D√©veloppement** : Commits fr√©quents et descriptifs
2. **Features** : Branches d√©di√©es (`feature/xxx`)
3. **Releases** : Merge vers `main` avec tags
4. **Hotfixes** : Branches `hotfix/xxx`

### Exemple workflow :
```bash
# Nouvelle feature
git checkout -b feature/product-search
# D√©veloppement...
git commit -m "feat: ajouter recherche produits"
git push origin feature/product-search

# Merge
git checkout main
git merge feature/product-search
git tag v1.2.0
git push origin main --tags
```

---

## üöÄ Commande Push Module entre Environnements

### Description

Utilisez `wedev ps module push` pour pousser un module d'un environnement PrestaShop vers un autre.

### Usage

```bash
# Push vers PS8 depuis PS9 (d√©faut)
wedev ps module push mon_module

# Push vers environnement sp√©cifique
wedev ps module push mon_module ps-dev8

# Push depuis environnement sp√©cifique
wedev ps module push mon_module ps-dev8 --from=ps9-prod

# Liste compl√®te des options
wedev ps module push --help
```

### Workflow de d√©veloppement

```
PS9 Dev ‚Üí PS8 Test ‚Üí Production
    ‚Üì         ‚Üì         ‚Üì
  Develop  Compatibilit√© Live
```

### Avantages

- ‚úÖ **Une commande** pour pousser entre environnements
- ‚úÖ **Suppression automatique** du module existant
- ‚úÖ **Copie compl√®te** de tous les fichiers
- ‚úÖ **Validation** des environnements avant copie

### Apr√®s push

```bash
# Activer le module dans l'environnement destination
wedev ps module enable mon_module

# Vider le cache si n√©cessaire
rm -rf var/cache/*
```

---

**üí° Conseil** : Activez cette r√®gle (`alwaysApply: true`) pour √™tre rappel√© des bonnes pratiques Git !